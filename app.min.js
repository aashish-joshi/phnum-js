function loadScript(e){var t=document.head,n=document.createElement("script");n.type="text/javascript",n.src=e,t.appendChild(n)}function getUserCountry(){return new Promise((e,t)=>{fetch("https://api.sonetel.com/geo-location/ipaddress/").then(e=>e.json()).then(t=>{e(t)}).catch(e=>{t(e)})})}function getPhoneNumber(){return new Promise((e,t)=>{uriElem=document.querySelector("#sonetel-disp-num"),numJsonUri=uriElem.dataset.uri,fetch(numJsonUri).then(e=>e.json()).then(t=>{e(t)}).catch(e=>{t(e)})})}function appendNumber(e,t,n){const o=new libphonenumber.parsePhoneNumber(e,t),r=document.createElement("a");let u;r.href=o.getURI(),u=n.toUpperCase()===t.toUpperCase()?o.formatNational():o.formatInternational();const c=document.createTextNode(u);r.appendChild(c),r.title=u,document.getElementById("sonetel-disp-num").appendChild(r)}loadScript("https://cdnjs.cloudflare.com/ajax/libs/libphonenumber-js/1.9.49/libphonenumber-js.min.js"),getUserCountry().then(e=>{let t=e.response.country_code;getPhoneNumber().then(e=>{let n,o;exclude=document.querySelector("#sonetel-disp-num"),excludeNums=exclude.dataset.excludenum.split(","),excludeNums.forEach(function(e,t){excludeNums[t]=e.trim()});for(let r of e.numbers)if(-1===excludeNums.indexOf(r.e164number)&&r.iso.toUpperCase()===t){n=r.e164number,o=r.iso;break}void 0===n&&(n=e.default.e164number,o=e.default.iso),appendNumber(n,o,t)}).catch(e=>{console.error(e)})}).catch(e=>{console.error(e)});